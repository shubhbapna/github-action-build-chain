name: custom github action e2e

on:
  workflow_dispatch:
    inputs:
      definition-file:
        required: true
        type: string
      flow-type:
        required: true
        type: string
      starting-project:
        required: false
        type: string
      skip-execution:
        required: false
        type: string
      skip-project-execution:
        required: false
        type: string
      skip-checkout:
        required: false
        type: string
      skip-project-checkout:
        required: false
        type: string
      skip-parallel-checkout:
        required: false
        type: string
      custom-command-treatment:
        required: false
        type: string
      additional-flags:
        required: false
        type: string
      logger-level:
        default: "debug"
        required: false
        type: string
      annotations-prefix:
        required: false
        type: string
      
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ./
        with:
          definition-file: ${{ inputs.STARTING_PROJECT }}
          flow-type: ${{ inputs.FLOW_TYPE }}
          starting-project: ${{ inputs.STARTING_PROJECT }}
          skip-execution: ${{ inputs.SKIP_EXECUTION }}
          skip-project-execution: ${{ inputs.SKIP_PROJECT_EXECUTION }}
          skip-checkout: ${{ inputs.SKIP_CHECKOUT }}
          skip-project-checkout: ${{ inputs.SKIP_PROJECT_CHECKOUT }}
          skip-parallel-checkout: ${{ inputs.SKIP_PARALLEL_CHECKOUT }}
          custom-command-treatment: ${{ inputs.CUSTOM_COMMAND_TREATMENT }}
          additional-flags: ${{ inputs.ADDITIONAL_FLAGS }}
          logger-level: ${{ inputs.LOGGER_LEVEL }}
          annotations-prefix: ${{ inputs.ANNOTATIONS_PREFIX }}



